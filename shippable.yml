language:                               

ruby:                                      
  - language               

services:                                       
  - #any supported service 
  - postgres

build:
  ci:
    - psql -c 'create role shippable with superuser;' -U postgres
    - psql -c 'create database myapp_test;' -U postgres                     

env:      
  - dev                                          
  - production                          
  - stage                                                                

build:                                                  

  pre_ci:                               

  pre_ci_boot:                          
    image_name: Ruby 2.3.0
    image_tag: ruby
    pull:
    options:
  ci:
    - #command1 
    - #command2
 
  post_ci:
    - command1 bash install
    - command2 df   install
    - command3 git  install
    - command4 free install

  on_success:
    - command1 /bin/df -h
    - command2 /bin free -ml

  on_failure:
    - command1 echo "build failed"
    - command2 

  cache:
  cache_dir_list:
    - #dir1 
  push:

integrations:
 notifications:
   - integrationName:
     type:
     recipients:
       - #recp1
       - #recp2
